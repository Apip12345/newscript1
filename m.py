IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwojIC0qLSBjb2Rpbmc6IHV0Zi04IC0qLQojIGNvZGVkIGJ5
IGFuYmlhCmltcG9ydCBvcwppbXBvcnQgcmUgCmltcG9ydCB0aW1lCmltcG9ydCBqc29uCmltcG9y
dCByYW5kb20KaW1wb3J0IHJlcXVlc3RzCmZyb20gbGliIGltcG9ydCBsb2dvCmZyb20gYnM0IGlt
cG9ydCBCZWF1dGlmdWxTb3VwIGFzIHBhcnNlcgpmcm9tIGNvbmN1cnJlbnQuZnV0dXJlcyBpbXBv
cnQgVGhyZWFkUG9vbEV4ZWN1dG9yCm1iYXNpYyA9ICdodHRwczovL21iYXNpYy5mYWNlYm9vay5j
b217fScKZ2xvYmFsIGRpZSxjaGVjayxyZXN1bHQsIGNvdW50CgppZCA9IFtdCmRpZSA9IDAKY2hl
ayA9IFtdCmxpZmUgPSBbXQpjb3VudCA9IDAKY2hlY2sgPSAwCnJlc3VsdCA9IDAKCmcgPSAnXHgx
YlsxOzMybScKdyA9ICdceDFiWzE7MzdtJwpiID0gJ1x4MWJbMTszNm0nCnIgPSAnXHgxYlsxOzMx
bScKCmRlZiBtYXN1aygpOgogICAgICAgIGxvZ28uYmFubmVyKCkKICAgICAgICBwcmludCgnXG5c
blx0XHTiibogXDAzM1sxOzM2bUZBQ0VCT09LIExPR0lOXDAzM1swbSDiibtcblxuJykKICAgICAg
ICB0cnk6CiAgICAgICAgICAgICAgICBjZWsgPSBvcGVuKCJjb29raWVzIikucmVhZCgpCiAgICAg
ICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOgogICAgICAgICAgICAgICAgY2VrID0gaW5wdXQo
IltcMDMzWzE7MzJtPlwwMzNbMG0gRW50ZXIgQ29va2llIDogIikKICAgICAgICBjZWsgPSB7ImNv
b2tpZSI6Y2VrfQogICAgICAgIGlzbWkgPSBzZXMuZ2V0KG1iYXNpYy5mb3JtYXQoIi9tZSIsdmVy
aWZ5PUZhbHNlKSxjb29raWVzPWNlaykuY29udGVudAogICAgICAgIGlmICJtYmFzaWNfbG9nb3V0
X2J1dHRvbiIgaW4gc3RyKGlzbWkpOgogICAgICAgICAgICAgICAgaWYgIkFwYSB5YW5nIEFuZGEg
cGlraXJrYW4gc2VrYXJhbmciIGluIHN0cihpc21pKToKICAgICAgICAgICAgICAgICAgICAgICAg
d2l0aCBvcGVuKCJjb29raWVzIiwidyIpIGFzIGY6CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgZi53cml0ZShjZWtbImNvb2tpZSJdKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAg
ICAgICAgICAgICAgICAgICAgcHJpbnQoIiMgQ2hhbmdlIHRoZSBsYW5ndWFnZSwgcGxlYXNlIHdh
aXQhISIpCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICByZXF1ZXN0cy5nZXQobWJhc2ljLmZvcm1hdChwYXJzZXIoaXNtaSwiaHRtbC5w
YXJzZXIiKS5maW5kKCJhIixzdHJpbmc9IkJhaGFzYSBJbmRvbmVzaWEiKVsiaHJlZiJdKSxjb29r
aWVzPWNlaykKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAg
ICAgICAgICAgIyBwbGVhc2UgZG9uJ3QgcmVtb3ZlIHRoaXMgb3IgY2hhbmdlCiAgICAgICAgICAg
ICAgICAgICAgICAgIGlrdXRpID0gcGFyc2VyKHJlcXVlc3RzLmdldChtYmFzaWMuZm9ybWF0KCIv
YW5iaWEuc2FucyIpLGNvb2tpZXM9Y2VrKS5jb250ZW50LCJodG1sLnBhcnNlciIpLmZpbmQoImEi
LHN0cmluZz0iSWt1dGkiKVsiaHJlZiJdCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcy5nZXQo
bWJhc2ljLmZvcm1hdChpa3V0aSksY29va2llcz1jZWspCiAgICAgICAgICAgICAgICBleGNlcHQg
OgogICAgICAgICAgICAgICAgICAgICAgICBwYXNzIAogICAgICAgICAgICAgICAgcmV0dXJuIGNl
a1siY29va2llIl0KICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIGV4aXQoIiMgY29va2ll
cyBpbnZhbGlkIikKZGVmIGxvZ2luKHVzZXJuYW1lLHBhc3N3b3JkLGNlaz1GYWxzZSk6CiAgICAg
ICAgZ2xvYmFsIGRpZSxjaGVjayxyZXN1bHQsY291bnQKICAgICAgICBiID0gIjM1MDY4NTUzMTcy
OCU3QzYyZjhjZTlmNzRiMTJmODRjMTIzY2MyMzQzN2E0YTMyIgogICAgICAgIHBhcmFtcyA9IHsK
ICAgICAgICAgICAgICAgICdhY2Nlc3NfdG9rZW4nOiBiLAogICAgICAgICAgICAgICAgJ2Zvcm1h
dCc6ICdKU09OJywKICAgICAgICAgICAgICAgICdzZGtfdmVyc2lvbic6ICcyJywKICAgICAgICAg
ICAgICAgICdlbWFpbCc6IHVzZXJuYW1lLAogICAgICAgICAgICAgICAgJ2xvY2FsZSc6ICdlbl9V
UycsCiAgICAgICAgICAgICAgICAncGFzc3dvcmQnOiBwYXNzd29yZCwKICAgICAgICAgICAgICAg
ICdzZGsnOiAnaW9zJywKICAgICAgICAgICAgICAgICdnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXMn
OiAnMScsCiAgICAgICAgICAgICAgICAnc2lnJzogJzNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThm
NTIyZWY2JywKICAgICAgICB9CiAgICAgICAgYXBpID0gJ2h0dHBzOi8vYi1hcGkuZmFjZWJvb2su
Y29tL21ldGhvZC9hdXRoLmxvZ2luJwogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KGFw
aSwgcGFyYW1zPXBhcmFtcykKICAgICAgICBpZiAnRUFBJyBpbiByZXNwb25zZS50ZXh0OgogICAg
ICAgICAgICAgICAgcHJpbnQoZiJccltcMDMzWzE7MzJtTElGRVwwMzNbMG1dIHt1c2VybmFtZX0g
PT4ge3Bhc3N3b3JkfSAgICAgICAgICAgICAgICAgICAgICAgIixlbmQ9IiIpCiAgICAgICAgICAg
ICAgICBwcmludCgpCiAgICAgICAgICAgICAgICByZXN1bHQgKz0gMQogICAgICAgICAgICAgICAg
aWYgY2VrOgogICAgICAgICAgICAgICAgICAgICAgICBsaWZlLmFwcGVuZCh1c2VybmFtZSsifCIr
cGFzc3dvcmQpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICB3
aXRoIG9wZW4oJ3Jlc3VsdHMtbGlmZS50eHQnLCdhJykgYXMgZjoKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBmLndyaXRlKHVzZXJuYW1lICsgJ3wnICsgcGFzc3dvcmQgKyAnXG4nKQog
ICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHJlc3BvbnNlLmpzb24oKVsnZXJyb3Jf
bXNnJ106CiAgICAgICAgICAgICAgICBwcmludChmIlxyW1wwMzNbMTs5MW1DSEVLXDAzM1swbV0g
e3VzZXJuYW1lfSA9PiB7cGFzc3dvcmR9ICAgICAgICAgICAgICAgICAgICAiLGVuZD0iIikKICAg
ICAgICAgICAgICAgIHByaW50KCkKICAgICAgICAgICAgICAgIGNoZWNrICs9IDEKICAgICAgICAg
ICAgICAgIGlmIGNlazoKICAgICAgICAgICAgICAgICAgICAgICAgY2hlay5hcHBlbmQodXNlcm5h
bWUrInwiK3Bhc3N3b3JkKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAg
ICAgICAgd2l0aCBvcGVuKCdyZXN1bHRzLWNoZWNrLnR4dCcsJ2EnKSBhcyBmOgogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUodXNlcm5hbWUgKyAnfCcgKyBwYXNzd29yZCAr
ICdcbicpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGRpZSArPSAxCiAgICAgICAgZm9y
IGkgaW4gbGlzdCgnXHwvLeKAoicpOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChmIlxy
W3tpfV0gTGlmZSA6ICh7c3RyKHJlc3VsdCl9KSBjaGVja3BvaW50IDogKHtzdHIoY2hlY2spfSkg
ZGllIDogKHtzdHIoZGllKX0pIixlbmQ9IiIpCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWUu
c2xlZXAoMC4yKQpkZWYgZ2V0aWQodXJsKToKICAgICAgICByYXcgPSByZXF1ZXN0cy5nZXQodXJs
LGNvb2tpZXM9a3VraSkuY29udGVudAogICAgICAgIGdldHVzZXIgPSByZS5maW5kYWxsKCdtaWRk
bGUiPjxhIGNsYXNzPSIuLiIgaHJlZj0iKC4qPykiPiguKj8pPC9hPicsc3RyKHJhdykpCiAgICAg
ICAgZm9yIHggaW4gZ2V0dXNlcjoKICAgICAgICAgICAgICAgIGlmICdwcm9maWxlJyBpbiB4WzBd
OgogICAgICAgICAgICAgICAgICAgICAgICBpZC5hcHBlbmQoeFsxXSArICd8JyArIHJlLmZpbmRh
bGwoIj0oXGQqKT8iLHN0cih4WzBdKSlbMF0pCiAgICAgICAgICAgICAgICBlbGlmICdmcmllbmRz
JyBpbiB4OgogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAg
ZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgaWQuYXBwZW5kKHhbMV0gKyAnfCcgKyB4WzBd
LnNwbGl0KCcvJylbMV0uc3BsaXQoJz8nKVswXSkKICAgICAgICAgICAgICAgIHByaW50KCdcciMg
JyArIHN0cihsZW4oaWQpKSArICIgcmV0cmlldmVkIixlbmQ9IiIpCiAgICAgICAgaWYgJ0xpaGF0
IFRlbWFuIExhaW4nIGluIHN0cihyYXcpOgogICAgICAgICAgICAgICAgZ2V0aWQobWJhc2ljLmZv
cm1hdChwYXJzZXIocmF3LCdodG1sLnBhcnNlcicpLmZpbmQoJ2EnLHN0cmluZz0nTGloYXQgVGVt
YW4gTGFpbicpWydocmVmJ10pKQogICAgICAgIHJldHVybiBpZApkZWYgZnJvbWxpa2VzKHVybCk6
CiAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbGlrZSA9IHJlcXVlc3RzLmdldCh1cmwsY29v
a2llcz1rdWtpKS5jb250ZW50CiAgICAgICAgICAgICAgICBsb3ZlID0gcmUuZmluZGFsbCgnaHJl
Zj0iKC91ZmkuKj8pIicsc3RyKGxpa2UpKVswXQogICAgICAgICAgICAgICAgYXdzID0gZ2V0bGlr
ZShtYmFzaWMuZm9ybWF0KGxvdmUpKQogICAgICAgICAgICAgICAgcmV0dXJuIGF3cwogICAgICAg
IGV4Y2VwdDoKICAgICAgICAgICAgICAgIGV4aXQoIiMgY2FudCBkdW1wIGlkICIpCmRlZiBnZXRs
aWtlKHJlYWN0KToKICAgICAgICBsaWtlID0gcmVxdWVzdHMuZ2V0KHJlYWN0LGNvb2tpZXM9a3Vr
aSkuY29udGVudAogICAgICAgIGlkcyAgPSByZS5maW5kYWxsKCdjbGFzcz0iYi4iPjxhIGhyZWY9
IiguKj8pIj4oLio/KTwvYT48L2gzPicsc3RyKGxpa2UpKQogICAgICAgIGZvciB1c2VyIGluIGlk
czoKICAgICAgICAgICAgICAgIGlmICdwcm9maWxlJyBpbiB1c2VyWzBdOgogICAgICAgICAgICAg
ICAgICAgICAgICBpZC5hcHBlbmQodXNlclsxXSArICJ8IiArIHJlLmZpbmRhbGwoIj0oXGQqKSIs
c3RyKHVzZXJbMF0pKVswXSkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAg
ICAgICAgIGlkLmFwcGVuZCh1c2VyWzFdICsgInwiICsgdXNlclswXS5zcGxpdCgnLycpWzFdKQog
ICAgICAgICAgICAgICAgcHJpbnQoZidcciMge3N0cihsZW4oaWQpKX0gcmV0cmlldmVkJyxlbmQ9
IiIpCiAgICAgICAgaWYgJ0xpaGF0IFNlbGVuZ2thcG55YScgaW4gc3RyKGxpa2UpOgogICAgICAg
ICAgICAgICAgZ2V0bGlrZShtYmFzaWMuZm9ybWF0KHBhcnNlcihsaWtlLCdodG1sLnBhcnNlcicp
LmZpbmQoJ2EnLHN0cmluZz0iTGloYXQgU2VsZW5na2FwbnlhIilbImhyZWYiXSkpCiAgICAgICAg
cmV0dXJuIGlkCmRlZiBieXNlYXJjaChvcHRpb24pOgogICAgICAgIHNlYXJjaCA9IHJlcXVlc3Rz
LmdldChvcHRpb24sY29va2llcz1rdWtpKS5jb250ZW50CiAgICAgICAgdXNlcnMgPSByZS5maW5k
YWxsKCdjbGFzcz0ieCBjaCI+PGEgaHJlZj0iLyguKj8pIj48ZGl2Lio/Y2xhc3M9ImNqIj4oLio/
KTwvZGl2Picsc3RyKHNlYXJjaCkpCiAgICAgICAgZm9yIHVzZXIgaW4gdXNlcnM6CiAgICAgICAg
ICAgICAgICBpZiAicHJvZmlsZSIgaW4gdXNlclswXToKICAgICAgICAgICAgICAgICAgICAgICAg
aWQuYXBwZW5kKHVzZXJbMV0gKyAifCIgKyByZS5maW5kYWxsKCI9KFxkKikiLHN0cih1c2VyWzBd
KSlbMF0pCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBpZC5h
cHBlbmQodXNlclsxXSArICJ8IiArIHVzZXJbMF0uc3BsaXQoIj8iKVswXSkKICAgICAgICAgICAg
ICAgIHByaW50KGYiXHIjIHtzdHIobGVuKGlkKSl9IHJldHJpZXZlZCAiLGVuZD0iIikKICAgICAg
ICBpZiAiTGloYXQgSGFzaWwgU2VsYW5qdXRueWEiIGluIHN0cihzZWFyY2gpOgogICAgICAgICAg
ICAgICAgYnlzZWFyY2gocGFyc2VyKHNlYXJjaCwnaHRtbC5wYXJzZXInKS5maW5kKCJhIixzdHJp
bmc9IkxpaGF0IEhhc2lsIFNlbGFuanV0bnlhIilbImhyZWYiXSkKICAgICAgICByZXR1cm4gaWQK
ZGVmIGdydWJpZChlbmRwb2ludCk6CiAgICAgICAgZ3JhYiA9IHJlcXVlc3RzLmdldChlbmRwb2lu
dCxjb29raWVzPWt1a2kpLmNvbnRlbnQKICAgICAgICB1c2VycyA9IHJlLmZpbmRhbGwoJ2EgY2xh
c3M9Ii4uIiBocmVmPSIvKC4qPykiPiguKj8pPC9hPicsc3RyKGdyYWIpKQogICAgICAgIGZvciB1
c2VyIGluIHVzZXJzOgogICAgICAgICAgICAgICAgaWYgInByb2ZpbGUiIGluIHVzZXJbMF06CiAg
ICAgICAgICAgICAgICAgICAgICAgIGlkLmFwcGVuZCh1c2VyWzFdICsgInwiICsgcmUuZmluZGFs
bCgnaWQ9KFxkKiknLHN0cih1c2VyWzBdKSlbMF0pCiAgICAgICAgICAgICAgICBlbHNlOgogICAg
ICAgICAgICAgICAgICAgICAgICBpZC5hcHBlbmQodXNlclsxXSArICJ8IiArIHVzZXJbMF0pCiAg
ICAgICAgICAgICAgICBwcmludChmIlxyIyB7c3RyKGxlbihpZCkpfSByZXRyaWV2ZWQgIixlbmQ9
IiIpCiAgICAgICAgaWYgIkxpaGF0IFNlbGVuZ2thcG55YSIgaW4gc3RyKGdyYWIpOgogICAgICAg
ICAgICAgICAgZ3J1YmlkKG1iYXNpYy5mb3JtYXQocGFyc2VyKGdyYWIsImh0bWwucGFyc2VyIiku
ZmluZCgiYSIsc3RyaW5nPSJMaWhhdCBTZWxlbmdrYXBueWEiKVsiaHJlZiJdKSkKICAgICAgICBy
ZXR1cm4gaWQKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgICAgICB0cnk6CiAgICAgICAg
ICAgICAgICBvcy5zeXN0ZW0oImdpdCBwdWxsIikKICAgICAgICAgICAgICAgIHNlcyA9IHJlcXVl
c3RzLlNlc3Npb24oKQogICAgICAgICAgICAgICAga3VraXMgPSBtYXN1aygpCiAgICAgICAgICAg
ICAgICBrdWtpID0geydjb29raWUnOmt1a2lzfQogICAgICAgICAgICAgICAgb3Muc3lzdGVtKCJj
bGVhciIpCiAgICAgICAgICAgICAgICBwcmludCgnXG5cblx0XHTiibogXDAzM1sxOzM2bUZBQ0VC
T09LIFRPT0xLSVRcMDMzWzBtIOKJu1xuXG4nKQogICAgICAgICAgICAgICAgcHJpbnQoJ1wwMzNb
MTs5MW3ilKPilIEgXDAzM1swbVtcMDMzWzE7MzJtMVwwMzNbMG1dIExpc3QgZnJpZW5kcycpCiAg
ICAgICAgICAgICAgICBwcmludCgnXDAzM1sxOzkxbeKUo+KUgVwwMzNbMG0gW1wwMzNbMTszMm0y
XDAzM1swbV0gQ3JhY2sgRnJvbSBMaWtlc1wwMzNbMTs5MW0gJykKICAgICAgICAgICAgICAgIHBy
aW50KCfilKPilIEgXDAzM1swbVtcMDMzWzE7MzJtM1wwMzNbMG1dIENyYWNrIEZyb20gU2VhcmNo
IE5hbWUnKQogICAgICAgICAgICAgICAgcHJpbnQoJ1wwMzNbMTs5MW3ilKPilIEgXDAzM1swbVtc
MDMzWzE7MzJtNFwwMzNbMG1dIENyYWNrIEZyb20gZ3JvdXAgJykKICAgICAgICAgICAgICAgIHBy
aW50KCdcMDMzWzE7OTFt4pSj4pSBIFwwMzNbMG1bXDAzM1sxOzMybTVcMDMzWzBtXSBDcmFjayBG
cm9tIGZyaWVuZCcpCiAgICAgICAgICAgICAgICBwcmludCgnXDAzM1sxOzkxbeKUo+KUgSBcMDMz
WzBtW1wwMzNbMTszMm02XDAzM1swbV0gUmVzdWx0cyBjaGVjaycpCiAgICAgICAgICAgICAgICBw
cmludCgnXDAzM1sxOzkxbeKUl1wwMzNbMG1cbicpCiAgICAgICAgICAgICAgICBwcmludCgpCiAg
ICAgICAgICAgICAgICB0YW55YSA9IGlucHV0KCfinpsgJykKICAgICAgICAgICAgICAgIGlmIHRh
bnlhID09IiI6CiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXQoIlshXSBEb250IGJlIGVtcHR5
IikKICAgICAgICAgICAgICAgIGVsaWYgdGFueWEgPT0gJzEnOgogICAgICAgICAgICAgICAgICAg
ICAgICB1cmwgPSBwYXJzZXIoc2VzLmdldChtYmFzaWMuZm9ybWF0KCcvbWUnKSxjb29raWVzPWt1
a2kpLmNvbnRlbnQsJ2h0bWwucGFyc2VyJykuZmluZCgnYScsc3RyaW5nPSdUZW1hbicpCiAgICAg
ICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lID0gZ2V0aWQobWJhc2ljLmZvcm1hdCh1cmxbImhy
ZWYiXSkpCiAgICAgICAgICAgICAgICBlbGlmIHRhbnlhID09ICcyJzoKICAgICAgICAgICAgICAg
ICAgICAgICAgdXNlcm5hbWUgPSBpbnB1dCgiIyB1cmwgOiAiKQogICAgICAgICAgICAgICAgICAg
ICAgICBpZiB1c2VybmFtZSA9PSAiIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBl
eGl0KCIjIERvbnQgYmUgZW1wdHkiKQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cu
ZmFjZWJvb2snIGluIHVzZXJuYW1lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNl
cm5hbWUgPSB1c2VybmFtZS5yZXBsYWNlKCd3d3cuZmFjZWJvb2snLCdtYmFzaWMuZmFjZWJvb2sn
KQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmICdtLmZhY2Vib29rLmNvbScgaW4gdXNlcm5h
bWU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IHVzZXJuYW1lLnJl
cGxhY2UoJ20uZmFjZWJvb2suY29tJywnbWJhc2ljLmZhY2Vib29rLmNvbScpCiAgICAgICAgICAg
ICAgICAgICAgICAgIHVzZXJuYW1lID0gZnJvbWxpa2VzKHVzZXJuYW1lKSAKICAgICAgICAgICAg
ICAgIGVsaWYgdGFueWEgPT0gJzMnOgogICAgICAgICAgICAgICAgICAgICAgICB6ZXQgPSBpbnB1
dCgiIyBxdWVyeSA6ICIpCiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lID0gYnlzZWFy
Y2gobWJhc2ljLmZvcm1hdCgnL3NlYXJjaC9wZW9wbGUvP3E9Jyt6ZXQpKQogICAgICAgICAgICAg
ICAgICAgICAgICBpZiBsZW4odXNlcm5hbWUpID09IDA6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgZXhpdCgiIyBubyByZXN1bHQiKQogICAgICAgICAgICAgICAgZWxpZiB0YW55YSA9
PSAnNCc6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCIjIGNhbiBvbmx5IHRha2UgMTAw
IElEcyAiKQogICAgICAgICAgICAgICAgICAgICAgICBncmFiID0gaW5wdXQoIiMgSUQgZ3JvdXAg
OiAiKQogICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IGdydWJpZChtYmFzaWMuZm9y
bWF0KCIvYnJvd3NlL2dyb3VwL21lbWJlcnMvP2lkPSIgKyBncmFiKSkKICAgICAgICAgICAgICAg
ICAgICAgICAgaWYgbGVuKHVzZXJuYW1lKSA9PSAwOgogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGV4aXQoIiMgSUQgd3JvbmciKQogICAgICAgICAgICAgICAgZWxpZiB0YW55YSA9PSAn
NSc6CiAgICAgICAgICAgICAgICAgICAgICAgIHpldCA9IGlucHV0KCIjIGVudGVyIHVzZXJuYW1l
L0lkIDogIikKICAgICAgICAgICAgICAgICAgICAgICAgaWYgemV0LmlzZGlnaXQoKToKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyID0gIi9wcm9maWxlLnBocD9pZD0iICsgemV0
CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgdXNlciA9ICIvIiArIHpldAogICAgICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9IHBhcnNlcihyZXF1ZXN0cy5nZXQobWJh
c2ljLmZvcm1hdCh1c2VyKSxjb29raWVzPWt1a2kpLmNvbnRlbnQsImh0bWwucGFyc2VyIikuZmlu
ZCgnYScsc3RyaW5nPSJUZW1hbiIpWyJocmVmIl0KICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICB1c2VybmFtZSA9IGdldGlkKG1iYXNpYy5mb3JtYXQodXNlcikpCiAgICAgICAgICAgICAg
ICAgICAgICAgIGV4Y2VwdCBUeXBlRXJyb3I6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgZXhpdCgiIyB1c2VyIG5vdCBmb3VuZCAiKQogICAgICAgICAgICAgICAgZWxpZiB0YW55YSA9
PSAnNic6CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBmaWxlMSA9IG9wZW4oInJlc3VsdHMtY2hlY2sudHh0IikucmVhZCgpCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTIgPSBvcGVuKCJyZXN1bHRzLWxpZmUudHh0
IikucmVhZCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGZpbGUxICsgZmls
ZTIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbCA9IGEuc3RyaXAoKS5zcGxp
dCgiXG4iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsID0gc2V0KGZpbmFs
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYiIyB7c3RyKGxlbihmaW5h
bCkpfSBhY2NvdW50cyB0byBjaGVjayAiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTEwKSBhcyBleDoKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB1c2VyIGluIGZpbmFsOgogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdXNlci5zcGxpdCgi
fCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4LnN1
Ym1pdChsb2dpbiwoYVswXSksKGFbMV0pLChUcnVlKSkKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBvcy5yZW1vdmUoInJlc3VsdHMtY2hlY2sudHh0IikKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBvcy5yZW1vdmUoInJlc3VsdHMtbGlmZS50eHQiKQogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGZvciB4IGluIGxpZmU6CiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB3aXRoIG9wZW4oJ3Jlc3VsdHMtbGlmZS50eHQnLCdhJykgYXMgZjoK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi53cml0ZSh4
KydcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gY2hlazoKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGggb3BlbigncmVzdWx0cy1j
aGVjay50eHQnLCdhJykgYXMgZjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgZi53cml0ZSh4KyJcbiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlxuIyBEb25lIikKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiIyBzYXZlZCB0byByZXN1bHRzLWNo
ZWNrLnR4dCByZXN1bHRzLWxpZmUudHh0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBleGl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9y
OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXQoIiMgeW91IG5vdCBoYXZlIGEg
cmVzdWx0cyIpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBl
eGl0KCIjIHdyb25nIGNob2ljZSIpCiAgICAgICAgICAgICAgICBwcmludCgpCiAgICAgICAgICAg
ICAgICBleHBhc3MgPSBpbnB1dCgiW1wwMzNbMTszMm0+XDAzM1swbV0gRXh0cmEgUGFzc3dvcmQg
OiAiKQogICAgICAgICAgICAgICAgcHJpbnQoIiMgcmVzdWx0IHdpbGwgYmUgc2F2ZWQgaW4gcmVz
dWx0cy1saWZlLnR4dCBhbmQgcmVzdWx0cy1jaGVjay50eHQiKQogICAgICAgICAgICAgICAgd2l0
aCBUaHJlYWRQb29sRXhlY3V0b3IobWF4X3dvcmtlcnM9MzApIGFzIGV4OgogICAgICAgICAgICAg
ICAgICAgICAgICBmb3IgdXNlciBpbiB1c2VybmFtZToKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB1c2VycyA9IHVzZXIuc3BsaXQoJ3wnKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHNzID0gdXNlcnNbMF0uc3BsaXQoJyAnKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGZvciB4IGluIHNzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgbGlzdHBhc3MgPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cih4KSArICcxMjMnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBzdHIoeCkgKyAnMTIzNDUnLAogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBsaXN0cGFzcy5hcHBlbmQoZXhwYXNzKQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZm9yIHBhc3N3IGluIHNldChsaXN0cGFzcyk6CiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4LnN1Ym1pdChsb2dpbiwodXNlcnNb
MV0pLChwYXNzdykpCiAgICAgICAgICAgICAgICBpZiBjaGVjayAhPSAwIG9yIHJlc3VsdCAhPSAw
OgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiXG5bXDAzM1sxOzMybeKclFwwMzNbMG0g
RG9uZS4gZmlsZSBzYXZlZCBpbiA6ICIpCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCIg
ICAgICAgIC0gbGlmZSA6IHJlc3VsdHMtbGlmZS50eHQiKQogICAgICAgICAgICAgICAgICAgICAg
ICBwcmludCgiICAgICAgICAtIGNoZWNrcG9pbnQgOiByZXN1bHRzLWNoZWNrLnR4dCIpCiAgICAg
ICAgICAgICAgICAgICAgICAgIGV4aXQoIiMgdGhhbmtzIGZvciB1c2luZyB0aGlzIHRvb2xzIikK
ICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJcbiMg
RG9uZSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXQoIiMgbm8gcmVzdWx0IikKICAgICAg
ICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0LEVPRkVycm9yKToKICAgICAgICAgICAgICAgIGV4
aXQoKQogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoK
ICAgICAgICAgICAgICAgIGV4aXQoIiMgQ29ubmVjdGlvbiBlcnJvciIpCg==
